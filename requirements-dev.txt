# ==============================================================================
# DEVELOPMENT DEPENDENCIES
# ==============================================================================
#
# Зависимости, необходимые ТОЛЬКО для локальной разработки и тестирования.
# НЕ устанавливаются на продакшене (Amvera).
#
# Установка в dev-окружении:
#   pip install -r requirements.txt -r requirements-dev.txt
#
# Установка в продакшене (только production зависимости):
#   pip install -r requirements.txt

# Подключаем production зависимости
-r requirements.txt

# ------------------------------------------------------------------------------
# Testing
# ------------------------------------------------------------------------------

# pytest — современный фреймворк для тестирования Python-кода.
# Поддерживает fixtures, parametrize, markers, plugins.
# Используется для unit и integration тестов.
# Преимущества над unittest: проще синтаксис, мощные fixtures, лучший вывод ошибок.
pytest>=8.3.0

# pytest-asyncio — плагин pytest для тестирования async/await кода.
# КРИТИЧЕСКИ ВАЖЕН для тестирования aiogram handlers и async функций.
# Добавляет декоратор @pytest.mark.asyncio и async fixtures.
# Без него async тесты не будут работать корректно.
pytest-asyncio>=0.24.0

# pytest-cov — плагин pytest для измерения покрытия кода тестами.
# Показывает какие строки кода выполнялись во время тестов.
# Помогает находить непротестированные участки кода.
# Использование: pytest --cov=src --cov-report=html
pytest-cov>=6.0.0

# ------------------------------------------------------------------------------
# Type Checking
# ------------------------------------------------------------------------------

# mypy — статический анализатор типов для Python.
# Проверяет соответствие type hints, находит ошибки типов до запуска кода.
# Ловит ошибки типов на этапе разработки, до того как код попадёт в production.
# Использование: mypy src/ (проверка всех исходников).
# Конфигурация в pyproject.toml.
mypy>=1.14.0

# types-PyYAML — type stubs для библиотеки PyYAML.
# Без них mypy не понимает типы функций из pyyaml (yaml.safe_load и др.).
# Type stubs — это аннотации типов для библиотек без встроенных типов.
# Устанавливаются отдельно от основной библиотеки.
types-PyYAML>=6.0.0

# ------------------------------------------------------------------------------
# Code Quality
# ------------------------------------------------------------------------------

# ruff — сверхбыстрый линтер и форматтер для Python (написан на Rust).
# Заменяет flake8, isort, black, pylint одним инструментом.
# Проверяет стиль кода, находит ошибки, автоматически исправляет проблемы.
# В 10-100 раз быстрее традиционных линтеров.
# Использование:
#   ruff check . --fix   — проверка и автоисправление
#   ruff format .        — форматирование кода
# Конфигурация в pyproject.toml.
ruff>=0.8.0

# pre-commit — фреймворк для запуска git-хуков перед коммитом.
# Автоматически проверяет код (ruff, mypy) перед каждым git commit.
# Предотвращает коммит кода с ошибками стиля или типов.
# Установка хуков: pre-commit install
# Конфигурация в .pre-commit-config.yaml
pre-commit>=4.0.0
