"""FSM состояния для команды /chatgpt.

Управляет диалогом с AI:
1. Выбор модели (GPT-4o, Claude, и т.д.)
2. Общение с AI (многошаговый диалог с контекстом)
"""

from aiogram.fsm.state import State, StatesGroup


class ChatGPTStates(StatesGroup):
    """Состояния FSM для команды /chatgpt.

    Поток работы:
    1. /chatgpt → показываем выбор модели → waiting_for_model_selection
    2. Пользователь выбирает модель → сохраняем выбор → waiting_for_message
    3. Пользователь пишет сообщение → генерируем ответ → остаёмся в waiting_for_message
    4. Пользователь пишет ещё сообщение → генерируем ответ с учётом контекста → и т.д.
    5. /clear или /start → выход из FSM

    Attributes:
        waiting_for_model_selection: Ожидаем выбор модели (inline-кнопка).
        waiting_for_message: Ожидаем текстовое сообщение от пользователя.
            В этом состоянии пользователь может писать сколько угодно сообщений,
            каждое будет добавляться в контекст диалога.
    """

    # Шаг 1: Выбор модели
    # Пользователь видит inline-клавиатуру с доступными моделями
    waiting_for_model_selection = State()

    # Шаг 2: Диалог с AI
    # Пользователь пишет сообщения, AI отвечает с учётом контекста
    # Это состояние "зациклено" — пользователь может писать бесконечно
    waiting_for_message = State()
