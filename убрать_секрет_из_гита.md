# Как убрать секрет из Git и снова пушить

GitHub заблокировал push, потому что в коммите оказался файл **.env** с Replicate API Token (строка 474). Файл с секретами нельзя отправлять на GitHub.

## Что сделать

### Вариант 1 — быстрый (один новый коммит вместо двух)

Выполни в терминале **в папке проекта** по очереди:

```powershell
cd "c:\Users\Евгений\Documents\unibot-main"

# 1. Откатиться на состояние origin/main, но оставить все изменения в индексе
git reset --soft origin/main

# 2. Убрать .env из индекса (чтобы он не попал в коммит)
git reset HEAD .env

# 3. Проверить: .env не должен быть в списке "Changes to be committed"
git status

# 4. Сделать один новый коммит без .env
git add -A
git status
# Убедись, что .env НЕ в списке. Если есть — снова: git reset HEAD .env
git commit -m "Изменения без секретов"

# 5. Отправить на GitHub
git push origin main
```

После этого push должен пройти. Файл `.env` остаётся у тебя на диске, но в репозитории его не будет.

---

### Вариант 2 — если хочешь сохранить два отдельных коммита

Нужно переписать историю и убрать `.env` из коммита `ee8be52`:

```powershell
cd "c:\Users\Евгений\Documents\unibot-main"

# Удалить .env из всех коммитов, которые ещё не запушены
git filter-branch --force --index-filter "git rm --cached --ignore-unmatch .env" origin/main..HEAD
```

Потом: `git push origin main`.

---

## Важно после исправления

1. **Смени Replicate API Token** на https://replicate.com — старый токен уже «утек» в историю Git. В личном кабинете создай новый токен и подставь его в локальный `.env`.
2. **Никогда не делай** `git add .env` или `git add -f .env`. Файл `.env` уже в `.gitignore` — просто не добавляй его в коммиты.




